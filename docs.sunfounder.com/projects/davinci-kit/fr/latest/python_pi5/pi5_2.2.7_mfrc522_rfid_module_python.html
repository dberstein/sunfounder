

<!DOCTYPE html>
<html class="writer-html5" lang="fr" data-content_root="../">
<head>
  <meta charset="utf-8" />
  <meta name="readthedocs-addons-api-version" content="1"><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2.2.7 Module RFID MFRC522 &mdash; Documentation SunFounder davinci-kit-for-raspberry-pi </title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css%3Fv=80d5e7a1.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css%3Fv=e59714d7.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css%3Fv=76b2166b.css" />
      <link rel="stylesheet" type="text/css" href="https://ezblock.cc/readDocFile/custom.css" />
      <link rel="stylesheet" type="text/css" href="https://ezblock.cc/readDocFile/readTheDoc/src/css/index.css" />
      <link rel="stylesheet" type="text/css" href="https://ezblock.cc/readDocFile/readTheDoc/src/css/xterm.css" />

  
      <script src="../_static/jquery.js%3Fv=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js%3Fv=2cd50e6c"></script>
      <script src="../_static/documentation_options.js%3Fv=d1a510d7"></script>
      <script src="../_static/doctools.js%3Fv=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js%3Fv=dc90522c"></script>
      <script src="../_static/clipboard.min.js%3Fv=a7894cd8"></script>
      <script src="../_static/copybutton.js%3Fv=f281be69"></script>
      <script src="../_static/translations.js%3Fv=bf059b8c"></script>
      <script src="https://ezblock.cc/readDocFile/custom.js"></script>
      <script src="https://docs.sunfounder.com/projects/davinci-kit/fr/latest/_static/lang.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/ace.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/ext-language_tools.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/theme-chrome.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/mode-python.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/mode-sh.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/monokai.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/xterm.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/FitAddon.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/readTheDocIndex.js"></script>
    <script src="../_static/js/theme.js"></script>
    <script src="../_static/js/versions.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Extension" href="pi5_extension_python.html" />
    <link rel="prev" title="2.2.6 Module MPU6050" href="pi5_2.2.6_mpu6050_module_python.html" /> 
<script async type="text/javascript" src="../../../../../_/static/javascript/readthedocs-addons.js"></script><meta name="readthedocs-project-slug" content="davinci-kit-fr" /><meta name="readthedocs-version-slug" content="latest" /><meta name="readthedocs-resolver-filename" content="/python_pi5/pi5_2.2.7_mfrc522_rfid_module_python.html" /><meta name="readthedocs-http-status" content="200" /></head>

<body class="wy-body-for-nav">
<nav id="nav-bar">
  <ul class="nav-bar-items" id="nav-bar-items">
    <li class="nav-bar-logo">
      <a href="https://sunfounder.com">
        <img class="logo-img" src="https://ezblock.cc/readDocFile/sunfounder_LOGO_160x@2x.png"/>
      </a>
    </li>
  </ul>
</nav>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            SunFounder davinci-kit-for-raspberry-pi
          </a>
              <div class="switch-menus">
                <div class="version-switch"></div>
                <div class="language-switch"></div>
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" aria-label="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">About this Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../component_list.html">Liste des composants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpio_extension_board.html">Carte d‚Äôextension GPIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../download_the_code.html">Download the Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install_setup_os/install_setup_os.html">Installer et Configurer le Syst√®me d‚ÄôExploitation Raspberry Pi</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../for_pi5.html">Pour le Pi 5</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="play_with_python_pi5.html">Jouez avec Python</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="check_the_gpiozero_python.html">V√©rifiez l‚Äôinstallation de <code class="docutils literal notranslate"><span class="pre">GPIO</span> <span class="pre">Zero</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="pi5_output_python.html">Output</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="pi5_input_python.html">Input</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="pi5_input_python.html#controleurs">2.1 Contr√¥leurs</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="pi5_input_python.html#capteurs">2.2 Capteurs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pi5_extension_python.html">Extension</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../c_pi5/play_with_c.html">Play with C</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scratch_pi5/play_with_scratch.html">Jouer avec Scratch</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../for_other_models.html">Pour Pi 4, 3 et Tous les Autres Mod√®les de Pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_video/python_video.html">Cours vid√©o Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix.html">Appendice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thank-learning.html">Remerciements</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SunFounder davinci-kit-for-raspberry-pi</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../for_pi5.html">Pour le Pi 5</a></li>
          <li class="breadcrumb-item"><a href="play_with_python_pi5.html">Jouez avec Python</a></li>
          <li class="breadcrumb-item"><a href="pi5_input_python.html">Input</a></li>
      <li class="breadcrumb-item active">2.2.7 Module RFID MFRC522</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/python_pi5/pi5_2.2.7_mfrc522_rfid_module_python.rst.txt" rel="nofollow"> Afficher la source de la page</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="admonition note">
<p class="admonition-title">Note</p>
<p>Bonjour et bienvenue dans la Communaut√© Facebook des passionn√©s de Raspberry Pi, Arduino et ESP32 de SunFounder ! Plongez plus profond√©ment dans l‚Äôunivers des Raspberry Pi, Arduino et ESP32 avec d‚Äôautres passionn√©s.</p>
<p><strong>Pourquoi rejoindre ?</strong></p>
<ul class="simple">
<li><p><strong>Support d‚Äôexperts</strong> : R√©solvez les probl√®mes apr√®s-vente et les d√©fis techniques avec l‚Äôaide de notre communaut√© et de notre √©quipe.</p></li>
<li><p><strong>Apprendre et partager</strong> : √âchangez des astuces et des tutoriels pour am√©liorer vos comp√©tences.</p></li>
<li><p><strong>Aper√ßus exclusifs</strong> : Acc√©dez en avant-premi√®re aux annonces de nouveaux produits et aux aper√ßus.</p></li>
<li><p><strong>R√©ductions sp√©ciales</strong> : Profitez de r√©ductions exclusives sur nos produits les plus r√©cents.</p></li>
<li><p><strong>Promotions festives et cadeaux</strong> : Participez √† des cadeaux et des promotions de vacances.</p></li>
</ul>
<p>üëâ Pr√™t √† explorer et √† cr√©er avec nous ? Cliquez [<a href="https://bit.ly/raphaelkit " target="_blank">Ici</a>] et rejoignez-nous aujourd‚Äôhui !</p>
</div>
<section id="module-rfid-mfrc522">
<span id="py"></span><h1>2.2.7 Module RFID MFRC522<a class="headerlink" href="pi5_2.2.7_mfrc522_rfid_module_python.html#module-rfid-mfrc522" title="Lien vers cette rubrique">ÔÉÅ</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="pi5_2.2.7_mfrc522_rfid_module_python.html#introduction" title="Lien vers cette rubrique">ÔÉÅ</a></h2>
<p>L‚Äôidentification par radiofr√©quence (RFID) d√©signe les technologies utilisant la
communication sans fil entre un objet (ou √©tiquette) et un dispositif d‚Äôinterrogation
(ou lecteur) pour suivre et identifier automatiquement ces objets.</p>
<p>Parmi les applications les plus courantes de cette technologie, on trouve les cha√Ænes
d‚Äôapprovisionnement au d√©tail, les cha√Ænes d‚Äôapprovisionnement militaires, les m√©thodes
de paiement automatis√©es, le suivi et la gestion des bagages, le suivi des documents et la
gestion pharmaceutique, pour n‚Äôen citer que quelques-unes.</p>
<p>Dans ce projet, nous allons utiliser la RFID pour la lecture et l‚Äô√©criture.</p>
</section>
<section id="composants-necessaires">
<h2>Composants N√©cessaires<a class="headerlink" href="pi5_2.2.7_mfrc522_rfid_module_python.html#composants-necessaires" title="Lien vers cette rubrique">ÔÉÅ</a></h2>
<p>Pour ce projet, nous avons besoin des composants suivants :</p>
<img alt="../_images/list_2.2.7.png" src="../_images/list_2.2.7.png" />
</section>
<section id="schema-electrique">
<h2>Sch√©ma √âlectrique<a class="headerlink" href="pi5_2.2.7_mfrc522_rfid_module_python.html#schema-electrique" title="Lien vers cette rubrique">ÔÉÅ</a></h2>
<img alt="../_images/image331.png" src="../_images/image331.png" />
</section>
<section id="procedures-experimentales">
<h2>Proc√©dures Exp√©rimentales<a class="headerlink" href="pi5_2.2.7_mfrc522_rfid_module_python.html#procedures-experimentales" title="Lien vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>√âtape 1 :</strong> Construire le circuit.</p>
<img alt="../_images/image232.png" src="../_images/image232.png" />
<p><strong>√âtape 2 :</strong> Activez le SPI avant de commencer l‚Äôexp√©rience, voir <a class="reference internal" href="../appendix/spi_configuration.html#spi-configuration"><span class="std std-ref">SPI Configuration</span></a> pour les d√©tails.</p>
<p><strong>√âtape 3 :</strong> Acc√©dez au dossier du code.</p>
<run></run><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">davinci</span><span class="o">-</span><span class="n">kit</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">raspberry</span><span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="n">python</span><span class="o">-</span><span class="n">pi5</span>
</pre></div>
</div>
<p><strong>√âtape 4 :</strong> Ex√©cutez <code class="docutils literal notranslate"><span class="pre">2.2.10_write.py</span></code>.</p>
<run></run><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">python3</span> <span class="mf">2.2.10</span><span class="n">_write</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p><strong>√âtape 5 :</strong> Apr√®s avoir ex√©cut√© le programme, entrez le texte que vous souhaitez √©crire (jusqu‚Äô√† 16 caract√®res), par exemple ¬´¬†welcome¬†¬ª, puis appuyez sur Entr√©e pour confirmer. Ensuite, le message ¬´¬†Les donn√©es ont √©t√© √©crites sur la carte¬†¬ª s‚Äôaffichera. Enfin, appuyez sur <code class="docutils literal notranslate"><span class="pre">Ctrl+C</span></code> pour arr√™ter l‚Äôex√©cution du code.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Veuillez placer votre carte RFID sur le lecteur...
Appuyez sur Ctrl-C pour arr√™ter.
Carte RFID d√©tect√©e!
UID de la carte: 9BF6210B
Veuillez entrer les donn√©es √† √©crire sur la carte (jusqu&#39;√† 16 caract√®res): welcome
Authentification du bloc 8 r√©ussie
4 backdata &amp;0x0F == 0x0A 10
Donn√©es √©crites
Les donn√©es ont √©t√© √©crites sur la carte
Lecture des donn√©es du bloc 8:
Secteur 8 [119, 101, 108, 99, 111, 109, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0]
</pre></div>
</div>
<p><strong>√âtape 6 :</strong> Ex√©cutez maintenant <code class="docutils literal notranslate"><span class="pre">2.2.10_read.py</span></code> pour lire les informations du tag ou de la carte que vous avez √©crites.</p>
<run></run><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">python3</span> <span class="mf">2.2.10</span><span class="n">_read</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p><strong>√âtape 7 :</strong> Apr√®s l‚Äôex√©cution, vous obtiendrez les informations suivantes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Veuillez placer votre carte RFID sur le lecteur...
Appuyez sur Ctrl-C pour arr√™ter.
Carte RFID d√©tect√©e!
UID de la carte: 9BF6210B
Authentification du bloc 8 r√©ussie
Secteur 8 [119, 101, 108, 99, 111, 109, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0]
MFRC522_Read type de retour: &lt;class &#39;int&#39;&gt;, Donn√©es: [119, 101, 108, 99, 111, 109, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0]
Secteur 8 [119, 101, 108, 99, 111, 109, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0]
Donn√©es lues: welcome
</pre></div>
</div>
</section>
<section id="analyse-du-code-pour-2-2-10-write-py">
<h2>Analyse du code pour <code class="docutils literal notranslate"><span class="pre">2.2.10_write.py</span></code><a class="headerlink" href="pi5_2.2.7_mfrc522_rfid_module_python.html#analyse-du-code-pour-2-2-10-write-py" title="Lien vers cette rubrique">ÔÉÅ</a></h2>
<p>Ce script Python √©crit des donn√©es fournies par l‚Äôutilisateur sur une carte RFID en utilisant le lecteur RFID MFRC522. Le script v√©rifie continuellement la pr√©sence d‚Äôune carte, invite l‚Äôutilisateur √† entrer des donn√©es √† √©crire, et confirme le succ√®s des op√©rations d‚Äô√©criture et de lecture.</p>
<ol class="arabic">
<li><p>Importations</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MFRC522</span></code> : Importe les fonctions et classes n√©cessaires aux op√©rations du lecteur RFID.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">signal</span></code> et <code class="docutils literal notranslate"><span class="pre">time</span></code> : <code class="docutils literal notranslate"><span class="pre">signal</span></code> est utilis√© pour g√©rer la terminaison contr√¥l√©e via SIGINT (Ctrl+C), et <code class="docutils literal notranslate"><span class="pre">time</span></code> est utilis√© pour ajouter des d√©lais dans la boucle principale.</p></li>
</ul>
</li>
<li><p>Variable Globale</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">continue_reading</span></code> : Contr√¥le la boucle principale, permettant au script de se terminer proprement lorsque d√©fini sur <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">continue_reading</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</li>
<li><p>Gestion des Signaux :</p>
<ul class="simple">
<li><p>Fonction <code class="docutils literal notranslate"><span class="pre">end_read</span></code> : Cette fonction est d√©clench√©e lorsque <code class="docutils literal notranslate"><span class="pre">Ctrl+C</span></code> (SIGINT) est d√©tect√©. Elle d√©finit <code class="docutils literal notranslate"><span class="pre">continue_reading</span></code> sur <code class="docutils literal notranslate"><span class="pre">False</span></code>, permettant ainsi au script de se terminer proprement.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">signal.signal(signal.SIGINT,</span> <span class="pre">end_read)</span></code> : Lie le signal SIGINT (Ctrl+C) √† <code class="docutils literal notranslate"><span class="pre">end_read</span></code>, de sorte qu‚Äôen cas d‚Äôinterruption, le script affiche un message et se termine proprement.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGINT</span><span class="p">,</span> <span class="n">end_read</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Configuration du Lecteur RFID :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rfid_reader</span></code> : Une instance de la classe <code class="docutils literal notranslate"><span class="pre">MFRC522</span></code>, utilis√©e pour contr√¥ler les op√©rations du lecteur RFID.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default_key</span></code> : Une liste de 6 octets, typiquement <code class="docutils literal notranslate"><span class="pre">0xFF</span></code> pour chaque octet. C‚Äôest la cl√© d‚Äôauthentification par d√©faut pour la plupart des cartes RFID.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cr√©er une instance de la classe MFRC522</span>
<span class="n">rfid_reader</span> <span class="o">=</span> <span class="n">MFRC522</span><span class="o">.</span><span class="n">MFRC522</span><span class="p">()</span>

<span class="c1"># D√©finir la cl√© par d√©faut (6 octets, par d√©faut tous √† 0xFF)</span>
<span class="n">default_key</span> <span class="o">=</span> <span class="p">[</span><span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Instructions pour l‚ÄôUtilisateur</p>
<p>Le script affiche des instructions dans la console, informant l‚Äôutilisateur de placer sa carte RFID sur le lecteur et d‚Äôutiliser <code class="docutils literal notranslate"><span class="pre">Ctrl+C</span></code> pour quitter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Veuillez placer votre carte RFID sur le lecteur...&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Appuyez sur Ctrl-C pour arr√™ter.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Boucle Principale : D√©tection, √âcriture et Lecture de Donn√©es</p>
<ul class="simple">
<li><p><strong>D√©tection de Carte</strong> : Le script appelle continuellement <code class="docutils literal notranslate"><span class="pre">MFRC522_Request</span></code> pour d√©tecter les cartes RFID. Si une carte est d√©tect√©e (<code class="docutils literal notranslate"><span class="pre">status</span> <span class="pre">==</span> <span class="pre">rfid_reader.MI_OK</span></code>), il passe √† l‚Äô√©tape suivante.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">TagType</span><span class="p">)</span> <span class="o">=</span> <span class="n">rfid_reader</span><span class="o">.</span><span class="n">MFRC522_Request</span><span class="p">(</span><span class="n">rfid_reader</span><span class="o">.</span><span class="n">PICC_REQIDL</span><span class="p">)</span>

<span class="c1"># Si une carte est d√©tect√©e</span>
<span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">rfid_reader</span><span class="o">.</span><span class="n">MI_OK</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Carte RFID d√©tect√©e!&quot;</span><span class="p">)</span>
    <span class="o">...</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># Attendre un peu avant de r√©essayer</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>R√©cup√©ration de l‚ÄôUID de la Carte</strong> : Appelle <code class="docutils literal notranslate"><span class="pre">MFRC522_SelectTagSN</span></code> pour r√©cup√©rer l‚Äôidentifiant unique (UID) de la carte. Si elle r√©ussit, l‚ÄôUID est converti en une cha√Æne hexad√©cimale et imprim√©. L‚ÄôUID est n√©cessaire pour l‚Äôauthentification.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">uid</span><span class="p">)</span> <span class="o">=</span> <span class="n">rfid_reader</span><span class="o">.</span><span class="n">MFRC522_SelectTagSN</span><span class="p">()</span>

<span class="c1"># Si nous avons l&#39;UID, continuer</span>
<span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">rfid_reader</span><span class="o">.</span><span class="n">MI_OK</span><span class="p">:</span>
    <span class="c1"># Afficher l&#39;UID</span>
    <span class="n">uid_str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%02X</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">uid</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;UID de la carte: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">uid_str</span><span class="p">)</span>
    <span class="o">...</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Impossible d&#39;obtenir l&#39;UID de la carte&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Pr√©paration des Donn√©es</strong> :</p>
<ul>
<li><p><strong>Demande de Saisie</strong> : L‚Äôutilisateur est invit√© √† entrer les donn√©es √† √©crire sur la carte (jusqu‚Äô√† 16 caract√®res).</p></li>
<li><p><strong>Troncature des Donn√©es</strong> : Les donn√©es sont tronqu√©es √† 16 caract√®res si l‚Äôutilisateur en entre plus.</p></li>
<li><p><strong>Conversion de Cha√Æne en Octets</strong> : Les donn√©es saisies par l‚Äôutilisateur sont converties en une liste d‚Äôoctets remplie √† 16 octets, comme requis par le format de stockage de la carte RFID.</p></li>
</ul>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">write_data</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Veuillez entrer les donn√©es √† √©crire sur la carte (jusqu&#39;√† 16 caract√®res) : &quot;</span><span class="p">)</span>
<span class="c1"># S&#39;assurer que les donn√©es ne d√©passent pas 16 caract√®res</span>
<span class="n">write_data</span> <span class="o">=</span> <span class="n">write_data</span><span class="p">[:</span><span class="mi">16</span><span class="p">]</span>
<span class="c1"># Convertir la cha√Æne en liste d&#39;octets, remplir jusqu&#39;√† 16 octets</span>
<span class="n">data_to_write</span> <span class="o">=</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">]</span><span class="o">*</span><span class="mi">16</span>
<span class="n">string_bytes</span> <span class="o">=</span> <span class="n">write_data</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">string_bytes</span><span class="p">)):</span>
    <span class="n">data_to_write</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">string_bytes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Sp√©cification du Num√©ro de Bloc</strong> : Le script sp√©cifie le bloc 8 pour √©crire les donn√©es. Remarque : Les num√©ros de bloc doivent √©viter les blocs de remorque de secteur, g√©n√©ralement le dernier bloc de chaque secteur, car ils sont utilis√©s pour les informations de contr√¥le.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">block_num</span> <span class="o">=</span> <span class="mi">8</span>  <span class="c1"># Par exemple, choisir le bloc 8</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Authentification de la Carte</strong> : <code class="docutils literal notranslate"><span class="pre">MFRC522_Auth</span></code> authentifie le bloc sp√©cifi√© en utilisant la cl√© par d√©faut et l‚ÄôUID. Si l‚Äôauthentification est r√©ussie, le script proc√®de √† l‚Äô√©criture des donn√©es. Sinon, un message d‚Äôerreur est affich√©, et l‚Äôencryptage est arr√™t√©.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">status</span> <span class="o">=</span> <span class="n">rfid_reader</span><span class="o">.</span><span class="n">MFRC522_Auth</span><span class="p">(</span><span class="n">rfid_reader</span><span class="o">.</span><span class="n">PICC_AUTHENT1A</span><span class="p">,</span> <span class="n">block_num</span><span class="p">,</span> <span class="n">default_key</span><span class="p">,</span> <span class="n">uid</span><span class="p">)</span>

<span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">rfid_reader</span><span class="o">.</span><span class="n">MI_OK</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Authentification du bloc </span><span class="si">%d</span><span class="s2"> r√©ussie&quot;</span> <span class="o">%</span> <span class="n">block_num</span><span class="p">)</span>
    <span class="o">...</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;√âchec de l&#39;authentification&quot;</span><span class="p">)</span>
    <span class="n">rfid_reader</span><span class="o">.</span><span class="n">MFRC522_StopCrypto1</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>√âcriture des Donn√©es sur la Carte</strong> : <code class="docutils literal notranslate"><span class="pre">MFRC522_Write</span></code> √©crit les donn√©es pr√©par√©es sur le bloc sp√©cifi√© de la carte RFID. Apr√®s l‚Äô√©criture, un message confirme que les donn√©es ont √©t√© correctement √©crites sur la carte.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rfid_reader</span><span class="o">.</span><span class="n">MFRC522_Write</span><span class="p">(</span><span class="n">block_num</span><span class="p">,</span> <span class="n">data_to_write</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Les donn√©es ont √©t√© √©crites sur la carte&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>V√©rification des Donn√©es √âcrites</strong> : Pour v√©rifier l‚Äôop√©ration d‚Äô√©criture, le script relit les donn√©es du m√™me bloc en utilisant <code class="docutils literal notranslate"><span class="pre">MFRC522_Read</span></code>. Les donn√©es r√©cup√©r√©es sont imprim√©es pour permettre √† l‚Äôutilisateur de v√©rifier les donn√©es.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Lecture des donn√©es du bloc </span><span class="si">%d</span><span class="s2">:&quot;</span> <span class="o">%</span> <span class="n">block_num</span><span class="p">)</span>
<span class="n">rfid_reader</span><span class="o">.</span><span class="n">MFRC522_Read</span><span class="p">(</span><span class="n">block_num</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Arr√™t de l‚ÄôEncryptage</strong> : <code class="docutils literal notranslate"><span class="pre">MFRC522_StopCrypto1</span></code> arr√™te le processus d‚Äôencryptage apr√®s les op√©rations. Cette √©tape est n√©cessaire pour r√©initialiser l‚Äô√©tat de communication de la carte.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Arr√™ter l&#39;encryptage</span>
<span class="n">rfid_reader</span><span class="o">.</span><span class="n">MFRC522_StopCrypto1</span><span class="p">()</span>
</pre></div>
</div>
<ul>
<li><p><strong>Sortie de la Boucle</strong> : Apr√®s l‚Äô√©criture et la v√©rification des donn√©es, <code class="docutils literal notranslate"><span class="pre">continue_reading</span></code> est d√©fini sur <code class="docutils literal notranslate"><span class="pre">False</span></code> pour sortir de la boucle et terminer le script.</p>
<blockquote>
<div><p>continue_reading = False</p>
</div></blockquote>
</li>
</ul>
</li>
</ol>
<p><strong>Points Cl√©s</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Terminaison Contr√¥l√©e</strong> : Le script capture SIGINT (Ctrl+C) pour se terminer en toute s√©curit√© et afficher un message, permettant √† toute op√©ration en cours de se terminer avant de quitter.</p></li>
<li><p><strong>Interaction Utilisateur</strong> : Invite l‚Äôutilisateur √† saisir des donn√©es, permettant ainsi de personnaliser les donn√©es √† chaque fois que la carte est √©crite.</p></li>
<li><p><strong>Authentification</strong> : S‚Äôassure que l‚Äôacc√®s au bloc sp√©cifi√© est s√©curis√©, g√©rant les √©checs d‚Äôauthentification de mani√®re contr√¥l√©e.</p></li>
<li><p><strong>Formatage des Donn√©es</strong> : Convertit les donn√©es en cha√Æne de caract√®res en un format de liste d‚Äôoctets compatible avec la structure de stockage de la carte, avec remplissage si n√©cessaire.</p></li>
<li><p><strong>V√©rification</strong> : Relit les donn√©es de la carte pour confirmer une √©criture r√©ussie, am√©liorant la fiabilit√©.</p></li>
<li><p><strong>Modularit√©</strong> : Le script est bien structur√© avec des fonctionnalit√©s claires pour la d√©tection, l‚Äô√©criture et la lecture, ce qui le rend plus facile √† suivre et √† maintenir.</p></li>
</ul>
</div></blockquote>
<p>Ce script est adapt√© aux applications n√©cessitant √† la fois des capacit√©s de lecture et d‚Äô√©criture avec des cartes RFID, telles que le contr√¥le d‚Äôacc√®s ou l‚Äôidentification d‚Äôutilisateur.</p>
</section>
<section id="explication-du-code-pour-2-2-10-read-py">
<h2>Explication du code pour <code class="docutils literal notranslate"><span class="pre">2.2.10_read.py</span></code><a class="headerlink" href="pi5_2.2.7_mfrc522_rfid_module_python.html#explication-du-code-pour-2-2-10-read-py" title="Lien vers cette rubrique">ÔÉÅ</a></h2>
<p>Ce script Python utilise un <strong>lecteur RFID (MFRC522)</strong> pour lire les donn√©es des cartes RFID. Le script est structur√© pour v√©rifier en continu la pr√©sence de cartes, r√©cup√©rer leurs donn√©es, et g√©rer proprement les demandes de sortie gr√¢ce √† la gestion des signaux.</p>
<ol class="arabic">
<li><p>Importations :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MFRC522</span></code> : Ce module fournit les m√©thodes pour interagir avec le lecteur RFID MFRC522.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">signal</span></code> et <code class="docutils literal notranslate"><span class="pre">time</span></code> : Utilis√©s pour g√©rer la terminaison du script (par exemple, avec <code class="docutils literal notranslate"><span class="pre">Ctrl+C</span></code>) et contr√¥ler le d√©lai de certaines op√©rations.</p></li>
</ul>
</li>
<li><p>Variables globales :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">continue_reading</span></code> : Un indicateur bool√©en qui contr√¥le la boucle principale de lecture, permettant au script de s‚Äôarr√™ter proprement lorsque <code class="docutils literal notranslate"><span class="pre">Ctrl+C</span></code> est press√©.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">continue_reading</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</li>
<li><p>Gestion des signaux :</p>
<ul class="simple">
<li><p>Fonction <code class="docutils literal notranslate"><span class="pre">end_read</span></code> : Cette fonction est d√©clench√©e lorsque <code class="docutils literal notranslate"><span class="pre">Ctrl+C</span></code> (SIGINT) est d√©tect√©. Elle d√©finit <code class="docutils literal notranslate"><span class="pre">continue_reading</span></code> sur <code class="docutils literal notranslate"><span class="pre">False</span></code>, permettant ainsi au script de se terminer proprement.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">signal.signal(signal.SIGINT,</span> <span class="pre">end_read)</span></code> : Associe le signal SIGINT (Ctrl+C) √† <code class="docutils literal notranslate"><span class="pre">end_read</span></code>, de sorte qu‚Äôen cas d‚Äôinterruption, le script affiche un message et se termine proprement.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGINT</span><span class="p">,</span> <span class="n">end_read</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Configuration du lecteur RFID :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rfid_reader</span></code> : Une instance de la classe <code class="docutils literal notranslate"><span class="pre">MFRC522</span></code>, utilis√©e pour contr√¥ler les op√©rations du lecteur RFID.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default_key</span></code> : Une liste de 6 octets, g√©n√©ralement <code class="docutils literal notranslate"><span class="pre">0xFF</span></code> pour chaque octet. C‚Äôest la cl√© d‚Äôauthentification par d√©faut pour la plupart des cartes RFID.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">block_num</span></code> : Sp√©cifie le num√©ro de bloc √† lire sur la carte RFID, ici d√©fini sur le bloc <code class="docutils literal notranslate"><span class="pre">8</span></code>. Le num√©ro de bloc doit correspondre √† celui utilis√© lors de l‚Äô√©criture des donn√©es sur la carte.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cr√©er une instance de la classe MFRC522</span>
<span class="n">rfid_reader</span> <span class="o">=</span> <span class="n">MFRC522</span><span class="o">.</span><span class="n">MFRC522</span><span class="p">()</span>

<span class="c1"># D√©finir la cl√© par d√©faut (6 octets, par d√©faut tous √† 0xFF)</span>
<span class="n">default_key</span> <span class="o">=</span> <span class="p">[</span><span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">]</span>

<span class="c1"># D√©finir le num√©ro de bloc √† lire (doit correspondre au bloc utilis√© lors de l&#39;√©criture)</span>
<span class="n">block_num</span> <span class="o">=</span> <span class="mi">8</span>  <span class="c1"># Par exemple, bloc 8</span>
</pre></div>
</div>
</li>
<li><p>Instructions pour l‚Äôutilisateur</p>
<p>Le script affiche des instructions dans la console, informant l‚Äôutilisateur de placer sa carte RFID sur le lecteur et d‚Äôutiliser <code class="docutils literal notranslate"><span class="pre">Ctrl+C</span></code> pour quitter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Veuillez placer votre carte RFID sur le lecteur...&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Appuyez sur Ctrl-C pour arr√™ter.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Boucle principale : D√©tection de carte RFID et lecture des donn√©es.</p>
<ul>
<li><p><strong>Recherche de cartes</strong> : La boucle principale appelle continuellement <code class="docutils literal notranslate"><span class="pre">MFRC522_Request</span></code> pour rechercher des cartes RFID. Si une carte est d√©tect√©e, elle passe aux √©tapes suivantes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">TagType</span><span class="p">)</span> <span class="o">=</span> <span class="n">rfid_reader</span><span class="o">.</span><span class="n">MFRC522_Request</span><span class="p">(</span><span class="n">rfid_reader</span><span class="o">.</span><span class="n">PICC_REQIDL</span><span class="p">)</span>

<span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">rfid_reader</span><span class="o">.</span><span class="n">MI_OK</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Carte RFID d√©tect√©e!&quot;</span><span class="p">)</span>
    <span class="o">...</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># Si aucune carte n&#39;est d√©tect√©e, attendre un court moment avant de r√©essayer</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>R√©cup√©ration de l‚ÄôUID de la carte</strong> : Utilise <code class="docutils literal notranslate"><span class="pre">MFRC522_SelectTagSN</span></code> pour r√©cup√©rer l‚Äôidentifiant unique (UID) de la carte. Si r√©ussi, il convertit l‚ÄôUID en une cha√Æne hexad√©cimale et l‚Äôaffiche. Cet UID est n√©cessaire pour authentifier la carte.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">uid</span><span class="p">)</span> <span class="o">=</span> <span class="n">rfid_reader</span><span class="o">.</span><span class="n">MFRC522_SelectTagSN</span><span class="p">()</span>

<span class="c1"># Si l&#39;UID a √©t√© r√©cup√©r√© avec succ√®s, continuer</span>
<span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">rfid_reader</span><span class="o">.</span><span class="n">MI_OK</span><span class="p">:</span>
    <span class="c1"># Convertir la liste UID en cha√Æne hexad√©cimale</span>
    <span class="n">uid_str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%02X</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">uid</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;UID de la carte : </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">uid_str</span><span class="p">)</span>
    <span class="o">...</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Impossible d&#39;obtenir l&#39;UID de la carte&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Authentification de la carte</strong> : <code class="docutils literal notranslate"><span class="pre">MFRC522_Auth</span></code> authentifie l‚Äôacc√®s au bloc sp√©cifi√© en utilisant la cl√© par d√©faut et l‚ÄôUID de la carte. Si l‚Äôauthentification r√©ussit, le script passe √† la lecture des donn√©es du bloc.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">status</span> <span class="o">=</span> <span class="n">rfid_reader</span><span class="o">.</span><span class="n">MFRC522_Auth</span><span class="p">(</span><span class="n">rfid_reader</span><span class="o">.</span><span class="n">PICC_AUTHENT1A</span><span class="p">,</span> <span class="n">block_num</span><span class="p">,</span> <span class="n">default_key</span><span class="p">,</span> <span class="n">uid</span><span class="p">)</span>

<span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">rfid_reader</span><span class="o">.</span><span class="n">MI_OK</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Authentification du bloc </span><span class="si">%d</span><span class="s2"> r√©ussie&quot;</span> <span class="o">%</span> <span class="n">block_num</span><span class="p">)</span>
    <span class="o">...</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;√âchec de l&#39;authentification, code de statut : </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">status</span><span class="p">)</span>
    <span class="n">rfid_reader</span><span class="o">.</span><span class="n">MFRC522_StopCrypto1</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p><strong>Lecture des donn√©es</strong> :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MFRC522_Read</span></code> lit les donn√©es du bloc sp√©cifi√©.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code> : Cette variable contient les donn√©es brutes du bloc si l‚Äôop√©ration de lecture r√©ussit.</p></li>
<li><p>Le script convertit chaque octet de <code class="docutils literal notranslate"><span class="pre">data</span></code> en caract√®res et supprime tout octet nul de remplissage (<code class="docutils literal notranslate"><span class="pre">\x00</span></code>). Les donn√©es trait√©es sont ensuite affich√©es.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">read_status</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">rfid_reader</span><span class="o">.</span><span class="n">MFRC522_Read</span><span class="p">(</span><span class="n">block_num</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Type de retour de MFRC522_Read : </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">read_status</span><span class="p">)</span><span class="si">}</span><span class="s2">, Donn√©es : </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">read_status</span> <span class="o">==</span> <span class="n">rfid_reader</span><span class="o">.</span><span class="n">MI_OK</span> <span class="ow">and</span> <span class="n">data</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Secteur </span><span class="si">{</span><span class="n">block_num</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Convertir les donn√©es en cha√Æne et supprimer tout octet nul de remplissage</span>
    <span class="n">read_data</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">chr</span><span class="p">(</span><span class="n">byte</span><span class="p">)</span> <span class="k">for</span> <span class="n">byte</span> <span class="ow">in</span> <span class="n">data</span><span class="p">])</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\x00</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Donn√©es lues : </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">read_data</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;√âchec de la lecture des donn√©es, code de statut : </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">read_status</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">MFRC522_StopCrypto1</span></code> est appel√© pour arr√™ter l‚Äôencryptage et r√©initialiser la communication avec la carte.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Arr√™ter l&#39;encryptage sur la carte</span>
<span class="n">rfid_reader</span><span class="o">.</span><span class="n">MFRC522_StopCrypto1</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p><strong>Attente entre les lectures</strong> : Si aucune carte n‚Äôest d√©tect√©e, la boucle se met en pause pendant 0,5 seconde avant de r√©essayer.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">else</span><span class="p">:</span>
    <span class="c1"># Si aucune carte n&#39;est d√©tect√©e, attendre un court moment avant de r√©essayer</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ol>
<p><strong>Points cl√©s</strong></p>
<ul class="simple">
<li><p><strong>Sortie propre</strong> : Le script capture le signal <code class="docutils literal notranslate"><span class="pre">SIGINT</span></code> pour une terminaison contr√¥l√©e, permettant au lecteur RFID de terminer les op√©rations en cours.</p></li>
<li><p><strong>Gestion du bloc et de l‚ÄôUID</strong> : Utilise le bloc et l‚ÄôUID comme composants cl√©s pour lire les donn√©es d‚Äôune carte RFID, avec une gestion appropri√©e des erreurs d‚Äôauthentification et de lecture.</p></li>
<li><p><strong>Conception modulaire</strong> : L‚Äôutilisation de fonctions d√©di√©es du module <code class="docutils literal notranslate"><span class="pre">MFRC522</span></code> rend le script lisible et modulaire, simplifiant les op√©rations RFID telles que l‚Äôauthentification et la lecture de donn√©es.</p></li>
</ul>
</section>
<section id="image-du-phenomene">
<h2>Image du Ph√©nom√®ne<a class="headerlink" href="pi5_2.2.7_mfrc522_rfid_module_python.html#image-du-phenomene" title="Lien vers cette rubrique">ÔÉÅ</a></h2>
<img alt="../_images/image233.jpeg" src="../_images/image233.jpeg" />
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="pi5_2.2.6_mpu6050_module_python.html" class="btn btn-neutral float-left" title="2.2.6 Module MPU6050" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Pr√©c√©dent</a>
        <a href="pi5_extension_python.html" class="btn btn-neutral float-right" title="Extension" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Droits d'auteur 2025, SunFounder.</p>
  </div>

  Compil√© avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">th√®me</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>