

<!DOCTYPE html>
<html class="writer-html5" lang="it" data-content_root="../">
<head>
  <meta charset="utf-8" />
  <meta name="readthedocs-addons-api-version" content="1"><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.1.2 LED RGB &mdash; SunFounder davinci-kit-for-raspberry-pi  documentazione</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css%3Fv=80d5e7a1.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css%3Fv=e59714d7.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css%3Fv=76b2166b.css" />
      <link rel="stylesheet" type="text/css" href="https://ezblock.cc/readDocFile/custom.css" />
      <link rel="stylesheet" type="text/css" href="https://ezblock.cc/readDocFile/readTheDoc/src/css/index.css" />
      <link rel="stylesheet" type="text/css" href="https://ezblock.cc/readDocFile/readTheDoc/src/css/xterm.css" />

  
      <script src="../_static/jquery.js%3Fv=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js%3Fv=2cd50e6c"></script>
      <script src="../_static/documentation_options.js%3Fv=3fd72285"></script>
      <script src="../_static/doctools.js%3Fv=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js%3Fv=dc90522c"></script>
      <script src="../_static/clipboard.min.js%3Fv=a7894cd8"></script>
      <script src="../_static/copybutton.js%3Fv=f281be69"></script>
      <script src="../_static/translations.js%3Fv=0173e136"></script>
      <script src="https://ezblock.cc/readDocFile/custom.js"></script>
      <script src="https://docs.sunfounder.com/projects/davinci-kit/it/latest/_static/lang.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/ace.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/ext-language_tools.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/theme-chrome.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/mode-python.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/mode-sh.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/monokai.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/xterm.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/FitAddon.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/readTheDocIndex.js"></script>
    <script src="../_static/js/theme.js"></script>
    <script src="../_static/js/versions.js"></script>
    <link rel="index" title="Indice" href="../genindex.html" />
    <link rel="search" title="Cerca" href="../search.html" />
    <link rel="next" title="1.1.3 Grafico a barre LED" href="1.1.3_led_bar_graph.html" />
    <link rel="prev" title="1.1.1 LED Lampeggiante" href="1.1.1_blinking_led.html" /> 
<script async type="text/javascript" src="../../../../../_/static/javascript/readthedocs-addons.js"></script><meta name="readthedocs-project-slug" content="davinci-kit-it" /><meta name="readthedocs-version-slug" content="latest" /><meta name="readthedocs-resolver-filename" content="/c_pi5/1.1.2_rgb_led.html" /><meta name="readthedocs-http-status" content="200" /></head>

<body class="wy-body-for-nav">
<nav id="nav-bar">
  <ul class="nav-bar-items" id="nav-bar-items">
    <li class="nav-bar-logo">
      <a href="https://sunfounder.com">
        <img class="logo-img" src="https://ezblock.cc/readDocFile/sunfounder_LOGO_160x@2x.png"/>
      </a>
    </li>
  </ul>
</nav>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            SunFounder davinci-kit-for-raspberry-pi
          </a>
              <div class="switch-menus">
                <div class="version-switch"></div>
                <div class="language-switch"></div>
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Cerca documenti" aria-label="Cerca documenti" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Menu di navigazione">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">About this Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../component_list.html">Elenco dei Componenti</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpio_extension_board.html">Scheda di Estensione GPIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../download_the_code.html">Scarica il Codice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install_setup_os/install_setup_os.html">Installazione e configurazione di Raspberry Pi OS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../for_pi5.html">Per Pi 5</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../python_pi5/play_with_python_pi5.html">Divertiti con Python</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="play_with_c.html">Gioca con C</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="check_the_wiringpi_c.html">Installazione e verifica di WiringPi</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="1_output.html">1 Uscita</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="1.1.1_blinking_led.html">1.1.1 LED Lampeggiante</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="1.1.2_rgb_led.html#">1.1.2 LED RGB</a></li>
<li class="toctree-l4"><a class="reference internal" href="1.1.3_led_bar_graph.html">1.1.3 Grafico a barre LED</a></li>
<li class="toctree-l4"><a class="reference internal" href="1.1.4_7-segment_display.html">1.1.4 Display a 7 Segmenti</a></li>
<li class="toctree-l4"><a class="reference internal" href="1.1.5_4-Digit_7-segment_display.html">1.1.5 Display a 7 Segmenti a 4 Cifre</a></li>
<li class="toctree-l4"><a class="reference internal" href="1.1.6_led_dot_matrix.html">1.1.6 Matrice LED a Punti</a></li>
<li class="toctree-l4"><a class="reference internal" href="1.1.7_i2c_lcd1602.html">1.1.7 LCD1602 I2C</a></li>
<li class="toctree-l4"><a class="reference internal" href="1.2.1_active_buzzer.html">1.2.1 Cicalino Attivo</a></li>
<li class="toctree-l4"><a class="reference internal" href="1.2.2_passive_buzzer.html">1.2.2 Cicalino Passivo</a></li>
<li class="toctree-l4"><a class="reference internal" href="1.3.1_motor.html">1.3.1 Motore</a></li>
<li class="toctree-l4"><a class="reference internal" href="1.3.2_servo.html">1.3.2 Servo</a></li>
<li class="toctree-l4"><a class="reference internal" href="1.3.3_stepper_motor.html">1.3.3 Motore Passo-passo</a></li>
<li class="toctree-l4"><a class="reference internal" href="1.3.4_relay.html">1.3.4 Relè</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="2_input.html">2 Ingresso</a></li>
<li class="toctree-l3"><a class="reference internal" href="3_extension.html">3 Estensioni</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../scratch_pi5/play_with_scratch.html">Giocare con Scratch</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../for_other_models.html">Per Pi 4, 3 e tutti gli altri modelli Pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_video/python_video.html">Corso Video Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix.html">Appendice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thank-learning.html">Grazie</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Menu navigazione dispositivi mobili" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SunFounder davinci-kit-for-raspberry-pi</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Naviga tra le pagine">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../for_pi5.html">Per Pi 5</a></li>
          <li class="breadcrumb-item"><a href="play_with_c.html">Gioca con C</a></li>
          <li class="breadcrumb-item"><a href="1_output.html">1 Uscita</a></li>
      <li class="breadcrumb-item active">1.1.2 LED RGB</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/c_pi5/1.1.2_rgb_led.rst.txt" rel="nofollow"> Visualizza sorgente pagina</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Ciao, benvenuto nella Community di SunFounder per appassionati di Raspberry Pi, Arduino e ESP32 su Facebook! Unisciti a noi per esplorare più a fondo il mondo di Raspberry Pi, Arduino e ESP32 con altri appassionati.</p>
<p><strong>Perché unirti?</strong></p>
<ul class="simple">
<li><p><strong>Supporto Esperto</strong>: Risolvi i problemi post-vendita e le sfide tecniche con l’aiuto del nostro team e della community.</p></li>
<li><p><strong>Impara e Condividi</strong>: Scambia consigli e tutorial per migliorare le tue competenze.</p></li>
<li><p><strong>Anteprime Esclusive</strong>: Accedi in anticipo agli annunci di nuovi prodotti e alle anticipazioni.</p></li>
<li><p><strong>Sconti Speciali</strong>: Approfitta di sconti esclusivi sui nostri prodotti più recenti.</p></li>
<li><p><strong>Promozioni e Giveaway Festivi</strong>: Partecipa a promozioni e concorsi durante le festività.</p></li>
</ul>
<p>👉 Pronto a esplorare e creare con noi? Clicca su [<a href="https://bit.ly/raphaelkit " target="_blank">Qui</a>] e unisciti oggi!</p>
</div>
<section id="led-rgb">
<h1>1.1.2 LED RGB<a class="headerlink" href="1.1.2_rgb_led.html#led-rgb" title="Link to this heading"></a></h1>
<section id="introduzione">
<h2>Introduzione<a class="headerlink" href="1.1.2_rgb_led.html#introduzione" title="Link to this heading"></a></h2>
<p>In questa lezione, impareremo a controllare un LED RGB per farlo lampeggiare in diversi colori.</p>
</section>
<section id="componenti">
<h2>Componenti<a class="headerlink" href="1.1.2_rgb_led.html#componenti" title="Link to this heading"></a></h2>
<img alt="../_images/list_rgb_led1.png" class="align-center" src="../_images/list_rgb_led1.png" />
</section>
<section id="principio">
<h2>Principio<a class="headerlink" href="1.1.2_rgb_led.html#principio" title="Link to this heading"></a></h2>
<p><strong>PWM</strong></p>
<p>La modulazione di larghezza di impulso (PWM) è una tecnica per ottenere
risultati analogici con mezzi digitali. Si utilizza un controllo digitale
per creare un’onda quadra, un segnale che passa tra acceso e spento. Questa
alternanza consente di simulare tensioni intermedie tra il massimo (5V) e il
minimo (0V), regolando il tempo di permanenza del segnale in stato attivo (on)
rispetto a quello in stato inattivo (off). La durata del «tempo attivo» è detta
larghezza dell’impulso. Se questo pattern on-off si ripete abbastanza velocemente,
il risultato sembra essere una tensione continua che controlla la luminosità di un LED.</p>
<p><strong>Duty Cycle</strong></p>
<p>Il duty cycle rappresenta la percentuale di un periodo in cui un segnale è
attivo. Un periodo è il tempo necessario al segnale per completare un ciclo
acceso-spento. La formula del duty cycle può essere espressa come:</p>
<a class="reference internal image-reference" href="../_images/image561.png"><img alt="../_images/image561.png" class="align-center" src="../_images/image561.png" style="width: 1.16667in; height: 0.36458in;" />
</a>
<p>Dove <strong>D</strong> è il ciclo di lavoro (duty cycle), <strong>T</strong> è il tempo in cui il segnale è attivo,
e <strong>P</strong> è il periodo totale del segnale. Pertanto, un ciclo di lavoro al 60%
significa che il segnale è attivo per il 60% del tempo e inattivo per il 40%.
Il «tempo di accensione» di un duty cycle del 60% può essere una frazione di
secondo, un giorno o persino una settimana, a seconda della lunghezza del periodo.</p>
<a class="reference internal image-reference" href="../_images/image571.jpeg"><img alt="../_images/image571.jpeg" class="align-center" src="../_images/image571.jpeg" style="width: 4.325in; height: 5.49167in;" />
</a>
<p><strong>LED RGB</strong></p>
<a class="reference internal image-reference" href="../_images/rgb_led_sch1.png"><img alt="../_images/rgb_led_sch1.png" class="align-center" src="../_images/rgb_led_sch1.png" style="width: 500px;" />
</a>
<p>I tre colori primari del LED RGB possono essere combinati per ottenere varie
tonalità tramite la regolazione della luminosità. La luminosità può essere
controllata tramite PWM. Il Raspberry Pi dispone di un solo canale per l’uscita
PWM hardware, ma ne servono tre per controllare il LED RGB. Per fortuna, la
libreria softPwm simula il PWM (softPwm) tramite programmazione, permettendo il
controllo multi-canale del LED RGB.</p>
</section>
<section id="diagramma-schematico">
<h2>Diagramma Schematico<a class="headerlink" href="1.1.2_rgb_led.html#diagramma-schematico" title="Link to this heading"></a></h2>
<p>Dopo aver collegato i pin R, G e B a una resistenza limitatrice di corrente,
collegali rispettivamente a GPIO17, GPIO18 e GPIO27. Il pin più lungo (GND)
del LED va collegato al GND del Raspberry Pi. Assegnando valori PWM differenti
ai tre pin, il LED RGB mostrerà diversi colori.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>T-Board Name</p></td>
<td><p>physical</p></td>
<td><p>wiringPi</p></td>
<td><p>BCM</p></td>
</tr>
<tr class="row-even"><td><p>GPIO17</p></td>
<td><p>Pin 11</p></td>
<td><p>0</p></td>
<td><p>17</p></td>
</tr>
<tr class="row-odd"><td><p>GPIO18</p></td>
<td><p>Pin 12</p></td>
<td><p>1</p></td>
<td><p>18</p></td>
</tr>
<tr class="row-even"><td><p>GPIO27</p></td>
<td><p>Pin 13</p></td>
<td><p>2</p></td>
<td><p>27</p></td>
</tr>
</tbody>
</table>
<img alt="../_images/rgb_led_schematic1.png" src="../_images/rgb_led_schematic1.png" />
</section>
<section id="procedure-sperimentali">
<h2>Procedure Sperimentali<a class="headerlink" href="1.1.2_rgb_led.html#procedure-sperimentali" title="Link to this heading"></a></h2>
<p><strong>Passo 1:</strong> Costruisci il circuito.</p>
<a class="reference internal image-reference" href="../_images/image611.png"><img alt="../_images/image611.png" src="../_images/image611.png" style="width: 6.59097in; height: 4.29722in;" />
</a>
<p><strong>Passo 2:</strong> Vai nella cartella del codice.</p>
<run></run><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">davinci</span><span class="o">-</span><span class="n">kit</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">raspberry</span><span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="n">c</span><span class="o">/</span><span class="mf">1.1.2</span><span class="o">/</span>
</pre></div>
</div>
<p><strong>Passo 3:</strong> Compila il codice.</p>
<run></run><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcc</span> <span class="mf">1.1.2</span><span class="n">_rgbLed</span><span class="o">.</span><span class="n">c</span> <span class="o">-</span><span class="n">lwiringPi</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Quando si esegue l’istruzione «gcc», se non viene specificato «-o», il file eseguibile viene denominato «a.out».</p>
</div>
<p><strong>Passo 4:</strong> Esegui il file eseguibile.</p>
<run></run><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">./</span><span class="n">a</span><span class="o">.</span><span class="n">out</span>
</pre></div>
</div>
<p>Dopo l’esecuzione del codice, il LED RGB mostrerà
i colori rosso, verde, blu, giallo, rosa e ciano.
.. note:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Se</span><span class="p">,</span> <span class="n">dopo</span> <span class="n">l</span><span class="s1">&#39;esecuzione, il programma non funziona o compare il messaggio di errore: </span><span class="se">\&quot;</span><span class="s1">wiringPi.h: No such file or directory&quot;, fai riferimento a :ref:`Il codice C non funziona?`.</span>
</pre></div>
</div>
<p><strong>Codice</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;wiringPi.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;softPwm.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#define uchar unsigned char</span>
<span class="cp">#define LedPinRed    0</span>
<span class="cp">#define LedPinGreen  1</span>
<span class="cp">#define LedPinBlue   2</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">ledInit</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
<span class="w">    </span><span class="n">softPwmCreate</span><span class="p">(</span><span class="n">LedPinRed</span><span class="p">,</span><span class="w">  </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="n">softPwmCreate</span><span class="p">(</span><span class="n">LedPinGreen</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="n">softPwmCreate</span><span class="p">(</span><span class="n">LedPinBlue</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">ledColorSet</span><span class="p">(</span><span class="n">uchar</span><span class="w"> </span><span class="n">r_val</span><span class="p">,</span><span class="w"> </span><span class="n">uchar</span><span class="w"> </span><span class="n">g_val</span><span class="p">,</span><span class="w"> </span><span class="n">uchar</span><span class="w"> </span><span class="n">b_val</span><span class="p">){</span>
<span class="w">    </span><span class="n">softPwmWrite</span><span class="p">(</span><span class="n">LedPinRed</span><span class="p">,</span><span class="w">   </span><span class="n">r_val</span><span class="p">);</span>
<span class="w">    </span><span class="n">softPwmWrite</span><span class="p">(</span><span class="n">LedPinGreen</span><span class="p">,</span><span class="w"> </span><span class="n">g_val</span><span class="p">);</span>
<span class="w">    </span><span class="n">softPwmWrite</span><span class="p">(</span><span class="n">LedPinBlue</span><span class="p">,</span><span class="w">  </span><span class="n">b_val</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>

<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">wiringPiSetup</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">-1</span><span class="p">){</span><span class="w"> </span><span class="c1">//when initialize wiring failed, printf messageto screen</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;setup wiringPi failed !&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">ledInit</span><span class="p">();</span>
<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Red</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">ledColorSet</span><span class="p">(</span><span class="mh">0xff</span><span class="p">,</span><span class="mh">0x00</span><span class="p">,</span><span class="mh">0x00</span><span class="p">);</span><span class="w">   </span><span class="c1">//red</span>
<span class="w">        </span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Green</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">ledColorSet</span><span class="p">(</span><span class="mh">0x00</span><span class="p">,</span><span class="mh">0xff</span><span class="p">,</span><span class="mh">0x00</span><span class="p">);</span><span class="w">   </span><span class="c1">//green</span>
<span class="w">        </span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Blue</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">ledColorSet</span><span class="p">(</span><span class="mh">0x00</span><span class="p">,</span><span class="mh">0x00</span><span class="p">,</span><span class="mh">0xff</span><span class="p">);</span><span class="w">   </span><span class="c1">//blue</span>
<span class="w">        </span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Yellow</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">ledColorSet</span><span class="p">(</span><span class="mh">0xff</span><span class="p">,</span><span class="mh">0xff</span><span class="p">,</span><span class="mh">0x00</span><span class="p">);</span><span class="w">   </span><span class="c1">//yellow</span>
<span class="w">        </span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Purple</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">ledColorSet</span><span class="p">(</span><span class="mh">0xff</span><span class="p">,</span><span class="mh">0x00</span><span class="p">,</span><span class="mh">0xff</span><span class="p">);</span><span class="w">   </span><span class="c1">//purple</span>
<span class="w">        </span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Cyan</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">ledColorSet</span><span class="p">(</span><span class="mh">0xc0</span><span class="p">,</span><span class="mh">0xff</span><span class="p">,</span><span class="mh">0x3e</span><span class="p">);</span><span class="w">   </span><span class="c1">//cyan</span>
<span class="w">        </span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Spiegazione del Codice</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;softPwm.h&gt;</span>
</pre></div>
</div>
<p>Libreria usata per realizzare la funzione pwm tramite software.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">ledInit</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
<span class="w">    </span><span class="n">softPwmCreate</span><span class="p">(</span><span class="n">LedPinRed</span><span class="p">,</span><span class="w">  </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="n">softPwmCreate</span><span class="p">(</span><span class="n">LedPinGreen</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="n">softPwmCreate</span><span class="p">(</span><span class="n">LedPinBlue</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>La funzione crea un pin PWM software con un periodo tra 0x100us e 100x100us.</p>
<p>Il prototipo della funzione softPwmCreate(LedPinRed, 0, 100) è:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">softPwmCreate</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">pin</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">initialValue</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">pwmRange</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Parametro pin:</strong> Qualsiasi pin GPIO del Raspberry Pi può essere impostato come pin PWM.</p></li>
<li><p><strong>Parametro initialValue:</strong> Larghezza d’impulso iniziale pari a initialValue * 100us.</p></li>
<li><p><strong>Parametro pwmRange:</strong> Il periodo di PWM è pari a pwmRange * 100us.</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">ledColorSet</span><span class="p">(</span><span class="n">uchar</span><span class="w"> </span><span class="n">r_val</span><span class="p">,</span><span class="w"> </span><span class="n">uchar</span><span class="w"> </span><span class="n">g_val</span><span class="p">,</span><span class="w"> </span><span class="n">uchar</span><span class="w"> </span><span class="n">b_val</span><span class="p">){</span>
<span class="w">    </span><span class="n">softPwmWrite</span><span class="p">(</span><span class="n">LedPinRed</span><span class="p">,</span><span class="w">   </span><span class="n">r_val</span><span class="p">);</span>
<span class="w">    </span><span class="n">softPwmWrite</span><span class="p">(</span><span class="n">LedPinGreen</span><span class="p">,</span><span class="w"> </span><span class="n">g_val</span><span class="p">);</span>
<span class="w">    </span><span class="n">softPwmWrite</span><span class="p">(</span><span class="n">LedPinBlue</span><span class="p">,</span><span class="w">  </span><span class="n">b_val</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Questa funzione imposta i colori del LED. Usando RGB, <strong>r_val</strong> rappresenta
la luminosità del rosso, <strong>g_val</strong> quella del verde, e <strong>b_val</strong> quella del blu.</p>
<p>Il prototipo della funzione softPwmWrite(LedPinBlue, b_val) è:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">softPwmWrite</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">pin</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Parametro pin:</strong> Qualsiasi pin GPIO del Raspberry Pi può essere impostato come pin PWM.</p></li>
<li><p><strong>Parametro value:</strong> La larghezza dell’impulso PWM è value * 100us. Si noti che value deve essere inferiore a pwmRange definito in precedenza.</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">ledColorSet</span><span class="p">(</span><span class="mh">0xff</span><span class="p">,</span><span class="mh">0x00</span><span class="p">,</span><span class="mh">0x00</span><span class="p">);</span>
</pre></div>
</div>
<p>Chiamata alla funzione definita in precedenza. Scrive 0xff su LedPinRed e 0x00
su LedPinGreen e LedPinBlue, accendendo solo il LED rosso. Modificando i parametri,
è possibile ottenere altre combinazioni di colori.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Piè di pagina">
        <a href="1.1.1_blinking_led.html" class="btn btn-neutral float-left" title="1.1.1 LED Lampeggiante" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Precedente</a>
        <a href="1.1.3_led_bar_graph.html" class="btn btn-neutral float-right" title="1.1.3 Grafico a barre LED" accesskey="n" rel="next">Prossimo <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, SunFounder.</p>
  </div>

  Realizzato con <a href="https://www.sphinx-doc.org/">Sphinx</a> usando un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">tema</a>
    fornito da <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>