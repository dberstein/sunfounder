

<!DOCTYPE html>
<html class="writer-html5" lang="es" data-content_root="../">
<head>
  <meta charset="utf-8" />
  <meta name="readthedocs-addons-api-version" content="1"><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.1.3 Alarma de Reversa &mdash; documentaci√≥n de SunFounder davinci-kit-for-raspberry-pi - </title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css%3Fv=80d5e7a1.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css%3Fv=e59714d7.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css%3Fv=76b2166b.css" />
      <link rel="stylesheet" type="text/css" href="https://ezblock.cc/readDocFile/custom.css" />
      <link rel="stylesheet" type="text/css" href="https://ezblock.cc/readDocFile/readTheDoc/src/css/index.css" />
      <link rel="stylesheet" type="text/css" href="https://ezblock.cc/readDocFile/readTheDoc/src/css/xterm.css" />

  
      <script src="../_static/jquery.js%3Fv=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js%3Fv=2cd50e6c"></script>
      <script src="../_static/documentation_options.js%3Fv=e2bb6099"></script>
      <script src="../_static/doctools.js%3Fv=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js%3Fv=dc90522c"></script>
      <script src="../_static/clipboard.min.js%3Fv=a7894cd8"></script>
      <script src="../_static/copybutton.js%3Fv=f281be69"></script>
      <script src="../_static/translations.js%3Fv=efdbd0b9"></script>
      <script src="https://ezblock.cc/readDocFile/custom.js"></script>
      <script src="https://docs.sunfounder.com/projects/davinci-kit/es/latest/_static/lang.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/ace.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/ext-language_tools.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/theme-chrome.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/mode-python.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/mode-sh.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/monokai.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/xterm.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/FitAddon.js"></script>
      <script src="https://ezblock.cc/readDocFile/readTheDoc/src/js/readTheDocIndex.js"></script>
    <script src="../_static/js/theme.js"></script>
    <script src="../_static/js/versions.js"></script>
    <link rel="index" title="√çndice" href="../genindex.html" />
    <link rel="search" title="B√∫squeda" href="../search.html" />
    <link rel="next" title="3.1.4 Ventilador Inteligente" href="3.1.4_smart_fan.html" />
    <link rel="prev" title="3.1.2 Bienvenida" href="3.1.2_welcome.html" /> 
<script async type="text/javascript" src="../../../../../_/static/javascript/readthedocs-addons.js"></script><meta name="readthedocs-project-slug" content="davinci-kit-es" /><meta name="readthedocs-version-slug" content="latest" /><meta name="readthedocs-resolver-filename" content="/c_pi5/3.1.3_reversing_alarm.html" /><meta name="readthedocs-http-status" content="200" /></head>

<body class="wy-body-for-nav">
<nav id="nav-bar">
  <ul class="nav-bar-items" id="nav-bar-items">
    <li class="nav-bar-logo">
      <a href="https://sunfounder.com">
        <img class="logo-img" src="https://ezblock.cc/readDocFile/sunfounder_LOGO_160x@2x.png"/>
      </a>
    </li>
  </ul>
</nav>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            SunFounder davinci-kit-for-raspberry-pi
          </a>
              <div class="switch-menus">
                <div class="version-switch"></div>
                <div class="language-switch"></div>
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Buscar documentos" aria-label="Buscar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">About this Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../component_list.html">Lista de Componentes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpio_extension_board.html">Tarjeta de Extensi√≥n GPIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../download_the_code.html">Descarga el C√≥digo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install_setup_os/install_setup_os.html">Instalar y Configurar Raspberry Pi OS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../for_pi5.html">Para Pi 5</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../python_pi5/play_with_python_pi5.html">Juega con Python</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="play_with_c.html">Play with C</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="check_the_wiringpi_c.html">Instalar y Verificar WiringPi</a></li>
<li class="toctree-l3"><a class="reference internal" href="1_output.html">1 Salida</a></li>
<li class="toctree-l3"><a class="reference internal" href="2_input.html">2 Entrada</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="3_extension.html">3 Extensiones</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="3.1.1_counting_device.html">3.1.1 Dispositivo Contador</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.1.2_welcome.html">3.1.2 Bienvenida</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="3.1.3_reversing_alarm.html#">3.1.3 Alarma de Reversa</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.1.4_smart_fan.html">3.1.4 Ventilador Inteligente</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.1.5_battery_indicator.html">3.1.5 Indicador de Bater√≠a</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.1.6_motion_control.html">3.1.6 Control de Movimiento</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.1.7_traffic_light.html">3.1.7 Sem√°foro</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.1.8_overheat_monitor.html">3.1.8 Monitor de Sobrecalentamiento</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.1.9_password_lock.html">3.1.9 Cerradura con Contrase√±a</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.1.10_alarm_bell.html">3.1.10 Alarma de Emergencia</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.1.11_morse_code_generator.html">3.1.11 Generador de C√≥digo Morse</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.1.12_game_guess_number.html">3.1.12 JUEGO - Adivina el N√∫mero</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.1.13_game_10_second.html">3.1.13 JUEGO‚Äì 10 Segundos</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.1.14_game_not_not.html">3.1.14 JUEGO ‚Äì Not Not</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../scratch_pi5/play_with_scratch.html">Juega con Scratch</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../for_other_models.html">Para Pi 4, 3 y Todos los Dem√°s Modelos de Pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_video/python_video.html">Curso de Video en Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix.html">Appendix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thank-learning.html">Gracias</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SunFounder davinci-kit-for-raspberry-pi</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../for_pi5.html">Para Pi 5</a></li>
          <li class="breadcrumb-item"><a href="play_with_c.html">Play with C</a></li>
          <li class="breadcrumb-item"><a href="3_extension.html">3 Extensiones</a></li>
      <li class="breadcrumb-item active">3.1.3 Alarma de Reversa</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/c_pi5/3.1.3_reversing_alarm.rst.txt" rel="nofollow"> Ver c√≥digo fuente de la p√°gina</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="admonition note">
<p class="admonition-title">Nota</p>
<p>¬°Hola! Bienvenidos a la comunidad de entusiastas de SunFounder para Raspberry Pi, Arduino y ESP32 en Facebook. Sum√©rgete en el mundo de Raspberry Pi, Arduino y ESP32 junto con otros apasionados.</p>
<p><strong>¬øPor qu√© unirse?</strong></p>
<ul class="simple">
<li><p><strong>Soporte de Expertos</strong>: Soluciona problemas post-venta y desaf√≠os t√©cnicos con la ayuda de nuestra comunidad y equipo.</p></li>
<li><p><strong>Aprende y Comparte</strong>: Intercambia consejos y tutoriales para mejorar tus habilidades.</p></li>
<li><p><strong>Avances Exclusivos</strong>: Accede anticipadamente a anuncios de nuevos productos y adelantos.</p></li>
<li><p><strong>Descuentos Especiales</strong>: Disfruta de descuentos exclusivos en nuestros productos m√°s recientes.</p></li>
<li><p><strong>Promociones y Sorteos Festivos</strong>: Participa en sorteos y promociones especiales en d√≠as festivos.</p></li>
</ul>
<p>üëâ ¬øListo para explorar y crear con nosotros? Haz clic en [<a href="https://bit.ly/raphaelkit " target="_blank">Aqu√≠</a>] y √∫nete hoy.</p>
</div>
<section id="alarma-de-reversa">
<h1>3.1.3 Alarma de Reversa<a class="headerlink" href="3.1.3_reversing_alarm.html#alarma-de-reversa" title="Link to this heading">ÔÉÅ</a></h1>
<section id="introduccion">
<h2>Introducci√≥n<a class="headerlink" href="3.1.3_reversing_alarm.html#introduccion" title="Link to this heading">ÔÉÅ</a></h2>
<p>En este proyecto, usaremos una pantalla LCD, un zumbador y sensores
ultras√≥nicos para crear un sistema de asistencia de reversa. Podemos
colocarlo en un veh√≠culo a control remoto para simular el proceso real
de reversa al ingresar a un garaje.</p>
</section>
<section id="componentes">
<h2>Componentes<a class="headerlink" href="3.1.3_reversing_alarm.html#componentes" title="Link to this heading">ÔÉÅ</a></h2>
<img alt="../_images/list_Reversing_Alarm1.png" class="align-center" src="../_images/list_Reversing_Alarm1.png" />
</section>
<section id="diagrama-de-circuito">
<h2>Diagrama de Circuito<a class="headerlink" href="3.1.3_reversing_alarm.html#diagrama-de-circuito" title="Link to this heading">ÔÉÅ</a></h2>
<p>El sensor ultras√≥nico detecta la distancia entre √©l y el obst√°culo, la cual
se mostrar√° en el LCD en forma de c√≥digo. Al mismo tiempo, el sensor ultras√≥nico
emite una se√±al sonora de advertencia a diferentes frecuencias, seg√∫n el valor
de la distancia.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>T-Board Name</p></td>
<td><p>physical</p></td>
<td><p>wiringPi</p></td>
<td><p>BCM</p></td>
</tr>
<tr class="row-even"><td><p>GPIO23</p></td>
<td><p>Pin 16</p></td>
<td><p>4</p></td>
<td><p>23</p></td>
</tr>
<tr class="row-odd"><td><p>GPIO24</p></td>
<td><p>Pin 18</p></td>
<td><p>5</p></td>
<td><p>24</p></td>
</tr>
<tr class="row-even"><td><p>GPIO17</p></td>
<td><p>Pin 11</p></td>
<td><p>0</p></td>
<td><p>17</p></td>
</tr>
<tr class="row-odd"><td><p>SDA1</p></td>
<td><p>Pin 3</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>SCL1</p></td>
<td><p>Pin 5</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<a class="reference internal image-reference" href="../_images/Schematic_three_one31.png"><img alt="../_images/Schematic_three_one31.png" class="align-center" src="../_images/Schematic_three_one31.png" style="width: 800px;" />
</a>
</section>
<section id="procedimientos-experimentales">
<h2>Procedimientos Experimentales<a class="headerlink" href="3.1.3_reversing_alarm.html#procedimientos-experimentales" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>Paso 1:</strong> Construye el circuito.</p>
<a class="reference internal image-reference" href="../_images/image2421.png"><img alt="../_images/image2421.png" class="align-center" src="../_images/image2421.png" style="width: 800px;" />
</a>
<p><strong>Paso 2:</strong> Cambia al directorio.</p>
<run></run><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">davinci</span><span class="o">-</span><span class="n">kit</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">raspberry</span><span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="n">c</span><span class="o">/</span><span class="mf">3.1.3</span><span class="o">/</span>
</pre></div>
</div>
<p><strong>Paso 3:</strong> Compila.</p>
<run></run><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcc</span> <span class="mf">3.1.3</span><span class="n">_ReversingAlarm</span><span class="o">.</span><span class="n">c</span> <span class="o">-</span><span class="n">lwiringPi</span>
</pre></div>
</div>
<p><strong>Paso 4:</strong> Ejecuta.</p>
<run></run><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">./</span><span class="n">a</span><span class="o">.</span><span class="n">out</span>
</pre></div>
</div>
<p>Al ejecutar el c√≥digo, el m√≥dulo sensor ultras√≥nico detectar√° la distancia
al obst√°culo y luego mostrar√° la informaci√≥n en el LCD1602. Adem√°s, el
zumbador emitir√° un tono de advertencia cuya frecuencia cambiar√° seg√∫n la distancia.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<ul class="simple">
<li><p>Si aparece el error <code class="docutils literal notranslate"><span class="pre">wiringPi.h:</span> <span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span></code>, consulta <a class="reference internal" href="../libraries.html#install-wiringpi"><span class="std std-ref">Instalar y Verificar wiringPi</span></a>.</p></li>
<li><p>Si recibes el error <code class="docutils literal notranslate"><span class="pre">Unable</span> <span class="pre">to</span> <span class="pre">open</span> <span class="pre">I2C</span> <span class="pre">device:</span> <span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span></code>, debes habilitar I2C y revisar si el cableado es correcto en <a class="reference internal" href="../appendix/i2c_configuration.html#i2c-config"><span class="std std-ref">Configuraci√≥n de I2C</span></a>.</p></li>
<li><p>Si el c√≥digo y el cableado est√°n correctos pero la pantalla LCD no muestra contenido, ajusta el potenci√≥metro en la parte trasera para aumentar el contraste.</p></li>
</ul>
</div>
<p><strong>C√≥digo</strong></p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>El siguiente c√≥digo est√° incompleto. Para ver el c√≥digo completo, usa el
comando <code class="docutils literal notranslate"><span class="pre">nano</span> <span class="pre">3.1.1_ReversingAlarm.c</span></code>.</p>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;wiringPi.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sys/time.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;wiringPi.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;wiringPiI2C.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>

<span class="cp">#define Trig    4</span>
<span class="cp">#define Echo    5</span>
<span class="cp">#define Buzzer  0</span>

<span class="kt">int</span><span class="w"> </span><span class="n">LCDAddr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x27</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">BLEN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">fd</span><span class="p">;</span>

<span class="c1">//Aqu√≠ est√° la funci√≥n de LCD</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">write_word</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">data</span><span class="p">){...}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">send_command</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">comm</span><span class="p">){...}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">send_data</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">data</span><span class="p">){...}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">lcdInit</span><span class="p">(){...}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">clear</span><span class="p">(){...}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">write</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">data</span><span class="p">[]){...}</span>

<span class="c1">//Aqu√≠ est√° la funci√≥n de Ultrasonido</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">ultraInit</span><span class="p">(</span><span class="kt">void</span><span class="p">){...}</span>

<span class="kt">float</span><span class="w"> </span><span class="nf">disMeasure</span><span class="p">(</span><span class="kt">void</span><span class="p">){...}</span>

<span class="c1">//Aqu√≠ est√° la funci√≥n principal</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">dis</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">result</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">wiringPiSetup</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">-1</span><span class="p">){</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;setup wiringPi failed !&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="n">Buzzer</span><span class="p">,</span><span class="n">OUTPUT</span><span class="p">);</span>
<span class="w">    </span><span class="n">fd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wiringPiI2CSetup</span><span class="p">(</span><span class="n">LCDAddr</span><span class="p">);</span>
<span class="w">    </span><span class="n">lcdInit</span><span class="p">();</span>
<span class="w">    </span><span class="n">ultraInit</span><span class="p">();</span>

<span class="w">    </span><span class="n">clear</span><span class="p">();</span>
<span class="w">    </span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Ultrasonic Starting&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;By Sunfounder&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
<span class="w">        </span><span class="n">dis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">disMeasure</span><span class="p">();</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%.2f cm </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">dis</span><span class="p">);</span>
<span class="w">        </span><span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="w">        </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">Buzzer</span><span class="p">,</span><span class="n">LOW</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">dis</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">400</span><span class="p">){</span>
<span class="w">            </span><span class="n">clear</span><span class="p">();</span>
<span class="w">            </span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Error&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Out of range&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">clear</span><span class="p">();</span>
<span class="w">            </span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Distance is&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">sprintf</span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="s">&quot;%.2f cm&quot;</span><span class="p">,</span><span class="n">dis</span><span class="p">);</span>
<span class="w">            </span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>

<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">dis</span><span class="o">&gt;=</span><span class="mi">50</span><span class="p">)</span>
<span class="w">            </span><span class="p">{</span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);}</span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">dis</span><span class="o">&lt;</span><span class="mi">50</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">dis</span><span class="o">&gt;</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
<span class="w">                </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">Buzzer</span><span class="p">,</span><span class="n">HIGH</span><span class="p">);</span>
<span class="w">                </span><span class="n">delay</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
<span class="w">                </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">Buzzer</span><span class="p">,</span><span class="n">LOW</span><span class="p">);</span>
<span class="w">                </span><span class="n">delay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">dis</span><span class="o">&lt;=</span><span class="mi">20</span><span class="p">){</span>
<span class="w">                </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
<span class="w">                </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">Buzzer</span><span class="p">,</span><span class="n">HIGH</span><span class="p">);</span>
<span class="w">                </span><span class="n">delay</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
<span class="w">                </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">Buzzer</span><span class="p">,</span><span class="n">LOW</span><span class="p">);</span>
<span class="w">                </span><span class="n">delay</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Explicaci√≥n del C√≥digo</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">pinMode</span><span class="p">(</span><span class="n">Buzzer</span><span class="p">,</span><span class="n">OUTPUT</span><span class="p">);</span>
<span class="n">fd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wiringPiI2CSetup</span><span class="p">(</span><span class="n">LCDAddr</span><span class="p">);</span>
<span class="n">lcdInit</span><span class="p">();</span>
<span class="n">ultraInit</span><span class="p">();</span>
</pre></div>
</div>
<p>En este programa, aplicamos componentes previamente usados de manera conjunta:
zumbador, LCD y ultrasonido. Se inicializan de la misma forma que se hizo
anteriormente.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">dis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">disMeasure</span><span class="p">();</span>
<span class="w"> </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%.2f cm </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">dis</span><span class="p">);</span>
<span class="n">digitalWrite</span><span class="p">(</span><span class="n">Buzzer</span><span class="p">,</span><span class="n">LOW</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">dis</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">400</span><span class="p">){</span>
<span class="w">     </span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Error&quot;</span><span class="p">);</span>
<span class="w">     </span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Out of range&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Distance is&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">sprintf</span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="s">&quot;%.2f cm&quot;</span><span class="p">,</span><span class="n">dis</span><span class="p">);</span>
<span class="w">    </span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
<p>Aqu√≠ obtenemos el valor del sensor ultras√≥nico y calculamos la distancia.</p>
<p>Si el valor de la distancia supera el rango a detectar, se mostrar√° un mensaje
de error en el LCD. Si el valor de la distancia est√° dentro del rango, se
mostrar√°n los resultados correspondientes.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">sprintf</span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="s">&quot;%.2f cm&quot;</span><span class="p">,</span><span class="n">dis</span><span class="p">);</span>
</pre></div>
</div>
<p>Dado que la salida del LCD solo soporta caracteres, y la variable dis almacena
un valor de tipo float, usamos sprintf(). Esta funci√≥n convierte el valor float
a un car√°cter y lo guarda en la variable string result[]. %.2f indica que se
mantendr√°n dos decimales.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">dis</span><span class="o">&gt;=</span><span class="mi">50</span><span class="p">)</span>
<span class="p">{</span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);}</span>
<span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">dis</span><span class="o">&lt;</span><span class="mi">50</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">dis</span><span class="o">&gt;</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
<span class="w">    </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">Buzzer</span><span class="p">,</span><span class="n">HIGH</span><span class="p">);</span>
<span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
<span class="w">    </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">Buzzer</span><span class="p">,</span><span class="n">LOW</span><span class="p">);</span>
<span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">dis</span><span class="o">&lt;=</span><span class="mi">20</span><span class="p">){</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
<span class="w">    </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">Buzzer</span><span class="p">,</span><span class="n">HIGH</span><span class="p">);</span>
<span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
<span class="w">    </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">Buzzer</span><span class="p">,</span><span class="n">LOW</span><span class="p">);</span>
<span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Esta condici√≥n de evaluaci√≥n se usa para controlar el sonido del zumbador.
Seg√∫n la distancia, se divide en tres casos, cada uno con una frecuencia de
sonido distinta. Dado que el valor total del delay es de 500 ms, todos los
casos proporcionan un intervalo de 500 ms para el sensor ultras√≥nico.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pie de p√°gina">
        <a href="3.1.2_welcome.html" class="btn btn-neutral float-left" title="3.1.2 Bienvenida" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="3.1.4_smart_fan.html" class="btn btn-neutral float-right" title="3.1.4 Ventilador Inteligente" accesskey="n" rel="next">Siguiente <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Derechos de autor 2025, SunFounder.</p>
  </div>

  Compilado con <a href="https://www.sphinx-doc.org/">Sphinx</a> usando un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">tema</a>
    proporcionado por <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>